<head>
  <title>repinches</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <script>
    function initGoogleApi() {
      gapi.client.setApiKey('AIzaSyCl1ybNI6EWjT6PAXPPrY4kFLqZsn7Teqg');
      gapi.client.load('youtube', 'v3');
    };
  </script>
  <script src="https://apis.google.com/js/client.js?onload=initGoogleApi"></script>
</head>

<body>
  <div class="container">
    {{> search}}

    <div class="row">
      <div class="col-md-12">
        <div id="ytapiplayer"></div>
        {{> player}}
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        {{> playlist}}
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        {{> add}}
      </div>
    </div>
  </div>
</body>

<template name="search">
  <div class="row">
    <div class="col-md-12">
      <div class="input-group input-group-lg">
        <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
        <input type="text" id="search_query" class="form-control" placeholder="Buscar" />
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="progress progress-striped active" id="search-progress" style="display: none">
        <div class="progress-bar"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
          <span class="sr-only">Buscando...</span>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 search-list">
      {{#each songs}}
        {{> searchSong}}
      {{/each}}
    </div>
  </div>
</template>

<template name="searchSong">
  <div class="media search-song">
    <a class="pull-left" href="#">
      <img class="media-object thumbnail" src="{{thumbnail}}"/>
    </a>
    <div class="media-body">
      <h4 class="media-heading title">{{title}}</h4>
      <span>{{description}}</span>
    </div>
  </div>
</template>

<template name="player">
  {{#if current}}
    {{#if isMobile}}
      <div class="row">
        <div class="col-md-12">
          <div class="alert alert-info">
            {{> queued_song current}}
          </div>
        </div>
      </div>
    {{else}}
      {{init}}
    {{/if}}
  {{else}}
    <div class="alert alert-info">
      <p class="text-center">
        La lista de canciones está vacía
      </p>
   </div>
  {{/if}}
</template>

<template name="playlist">
  {{#each queued_songs}}
    {{> queued_song}}
  {{/each}}
</template>

<template name="queued_song">
  <div class="media song">
    <a class="pull-left" href="#">
      <img class="media-object thumbnail" src="{{thumbnail}}"/>
    </a>
    <div class="media-body">
      <h4 class="media-heading title">{{title}}</h4>
      <div class="description">{{description}}</div>
      {{#if isOwner}}
      <input type="button" value="Borrar" class="delete-queue delete-queue-{{_id}} pull-right btn btn-danger" />
      {{/if}}
    </div>
  </div>
</template>

<template name="add">
  <input type="button" value="Añadir canción" class="add-song btn btn-primary btn-lg pull-right" />
</template>
