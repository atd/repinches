<head>
  <title>repinches</title>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap-theme.min.css">
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
  <script>
    function initGoogleApi() {
      gapi.client.setApiKey('AIzaSyCl1ybNI6EWjT6PAXPPrY4kFLqZsn7Teqg');
      gapi.client.load('youtube', 'v3');
    };
  </script>
  <script src="https://apis.google.com/js/client.js?onload=initGoogleApi"></script>
</head>

<body>
  <div class="container">
    {{> search}}

    <div class="row">
      <div class="col-md-12">
        <div id="ytapiplayer"></div>
        {{> player}}
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        {{> playlist}}
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        {{> add}}
      </div>
    </div>
  </div>
</body>

<template name="search">
  <div class="row">
    <div class="col-md-12">
      <div class="input-group input-group-lg">
        <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
        <input type="text" id="search_query" class="form-control" placeholder="Buscar" />
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="progress progress-striped active" id="search-progress" style="display: none">
        <div class="progress-bar"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
          <span class="sr-only">Buscando...</span>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      {{#each songs}}
        {{> searchSong}}
      {{/each}}
    </div>
  </div>
</template>

<template name="searchSong">
  <div class="media">
    <a class="pull-left" href="#">
      <img class="media-object thumbnail" src="{{thumbnail}}"/>
    </a>
    <div class="media-body">
      <h4 class="media-heading title">{{title}}</h4>
      <span>{{description}}</span>
    </div>
  </div>
</template>

<template name="player">
  {{#if currentId}}
    {{#if isMobile}}
      <div class="row">
        <div class="col-md-12">
          <div class="alert alert-info">
            {{> song current}}
          </div>
        </div>
      </div>
    {{else}}
      {{init}}
    {{/if}}
  {{else}}
    <div class="alert alert-info">
      <p class="text-center">
        La lista de canciones está vacía
      </p>
   </div>
  {{/if}}
</template>

<template name="playlist">
  {{#each songs}}
    {{> song}}
  {{/each}}
</template>

<template name="song">
  <div class="media">
    <a class="pull-left" href="#">
      <img class="media-object thumbnail" src="{{thumbnail}}"/>
    </a>
    <div class="media-body">
      <h4 class="media-heading title">{{title}}</h4>
      <span>{{description}}</span>
    </div>
  </div>
</template>

<template name="add">
  <input type="button" value="Añadir canción" class="add-song btn btn-primary btn-lg pull-right" />
</template>
